<div *ngIf="mainId !== undefined && mainId !== null && !isEmpty" style="padding: 0px" class="card">
  <p-tabView>
    <!-- Display group relations if available -->
    <ng-template ngFor let-group [ngForOf]="configuration?.groups">
      <p-tabPanel *ngIf="!this.excludedPanels?.includes(group)" [header]="(getGroupHeader(group) | async).displayName"
        [selected]="this.selectedPanel === group">
        <app-entity-group-relation [mainType]="configName" [mainId]="mainId" [relation]="group">
        </app-entity-group-relation>
      </p-tabPanel>
    </ng-template>


    <div *ngIf="!this.excludedPanels?.includes('LogEntries')">
      <p-tabPanel *ngIf="this.configuration?.components?.includes('LogEntries')" header="Logbuch"
        [selected]="this.selectedPanel === 'LogEntries'">
        <app-entity-logs [mainType]="configName" [mainId]="mainId"></app-entity-logs>
      </p-tabPanel>
    </div>

    <div *ngIf="!this.excludedPanels?.includes('Notes')">
      <p-tabPanel *ngIf="this.configuration?.components?.includes('Notes')" header="Notizen"
        [selected]="this.selectedPanel === 'Notes'">
        <app-entity-notes [mainType]="configName" [mainId]="mainId"></app-entity-notes>
      </p-tabPanel>
    </div>

    <ng-template ngFor let-attrGroup [ngForOf]="configuration?.attributeGroups">
      <p-tabPanel *ngIf="!this.excludedPanels?.includes(attrGroup)" [header]="attrGroup.name"
        [selected]="this.selectedPanel === attrGroup">
        <app-entity-attributes [mainType]="configName" [mainId]="mainId" [attrGroup]="attrGroup">
        </app-entity-attributes>
      </p-tabPanel>
    </ng-template>

    <div *ngIf="!this.excludedPanels?.includes('Attributes')">
      <p-tabPanel *ngIf="this.configuration?.components?.includes('Attributes')" header="Attribute"
        [selected]="this.selectedPanel === 'Attributes'">
        <app-entity-attributes [mainType]="configName" [mainId]="mainId">
        </app-entity-attributes>
      </p-tabPanel>
    </div>

    <div *ngIf="!this.excludedPanels?.includes('FileAttachments')">
      <p-tabPanel *ngIf="this.configuration?.components?.includes('FileAttachments')" header="DateianhÃ¤nge"
        [selected]="this.selectedPanel === 'FileAttachments'">
        <div style="height: 250px">
          <app-entity-file-attachments [mainType]="configName" [mainId]="mainId"></app-entity-file-attachments>
        </div>
      </p-tabPanel>
    </div>

    <ng-template ngFor let-subtype [ngForOf]="configuration?.subtypes">
      <p-tabPanel *ngIf="!this.excludedPanels?.includes(subtype)"
        [header]="(getSubTypeHeader(subtype) | async).displayName" [selected]="this.selectedPanel === subtype">
        <app-entity-subtypes [subtype]="subtype" [mainId]="mainId"></app-entity-subtypes>
      </p-tabPanel>
    </ng-template>

    <div *ngIf="!this.excludedPanels?.includes('Actions')">
      <p-tabPanel *ngIf="showActionTab" header="Aktionen" [selected]="this.selectedPanel === 'Actions'">
        <app-right-actions-editor [mainId]="mainId"></app-right-actions-editor>
      </p-tabPanel>
    </div>

  </p-tabView>
</div>