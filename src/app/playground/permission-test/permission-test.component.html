<h2>Permission-Usability-Checks</h2>




<h3>default.foo.read</h3>
<div class="p-grid">
    <div class="p-col">&lt;div *ngxPermissionsOnly=&quot;'default.foo.read'; else failure1&quot;&gt;You have permissions for: default.foo.read&lt;/div&gt;<br/>
        &lt;ng-template #failure1&gt;You have NO permissions for: default.foo.read&lt;/ng-template&gt;</div>
    <div class="p-col"><div *ngxPermissionsOnly="'default.foo.read'; else failure1">You have permissions for: default.foo.read</div>
    <ng-template #failure1>You have NO permissions for: default.foo.read</ng-template></div>
</div> 
<div class="p-grid">
    <div class="p-col">&lt;div *appPermissionCheck=&quot;'default.foo.read';else failure2&quot;&gt;You have permissions for: default.foo.read&lt;/div&gt;<br/>
        &lt;ng-template #failure2&gt;You have NO permissions for: default.foo.read&lt;/ng-template&gt; </div>
    <div class="p-col">
        <div *appPermissionCheck="'default.foo.read';else failure2">You have permissions for: default.foo.read</div>
    <ng-template #failure2>You have NO permissions for: default.foo.read</ng-template> 
</div>
</div> 


<h3>default.$obj.$prop.read</h3>

<p>Values for vars are generated by this:</p>
<div>
    &lt;div *ngFor=&quot;let obj of valuesForObj&quot;&gt;<br/>
&lt;div *ngFor=&quot;let prop of valuesForProp&quot;&gt;   <br/>
!!EXPRESSION!!
&lt;/div&gt;<br/>
&lt;/div&gt;<br/>
</div>
<br/><br/><br/>

<br/>
<span class="header">
    Using the original directive and resolving the variables with the service
</span>
<br/>
<div class="p-grid">
    <div class="p-col">
                &lt;div *ngxPermissionsOnly=&quot;japs.resolveVars('default.$obj.$prop.read', {{ '{' }}'$obj':&nbsp;obj,&nbsp;'$prop':&nbsp;prop{{ '}' }})&quot;&gt;<br/>
                    &lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{ '{' }}{{ '{' }}obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}prop{{ '}' }}{{ '}' }}.read&lt;/p&gt;<br/>
                &lt;/div&gt; <br/>
    </div>
    <div class="p-col">
        <div *ngFor="let obj of valuesForObj">
            <div *ngFor="let prop of valuesForProp">                
                <div *ngxPermissionsOnly="japs.resolveVars('default.$obj.$prop.read', {'$obj': obj, '$prop': prop})">
                    <p>You have permissions for: default.{{obj}}.{{prop}}.read</p>
                </div> 
            </div>
        </div>

    </div>
</div> 

<br/>
<span class="header">
    Using the jmeleon directive in template form and resolving the variables with additional parameter as dict
</span>
<br/>
<div class="p-grid">
    <div class="p-col">
        &lt;ng-template&nbsp;[appPermissionCheck]=&quot;'default.$obj.$prop.read'&quot;&nbsp;[appPermissionCheckVarDict]=&quot;{{ '{' }}'$obj':&nbsp;obj,&nbsp;'$prop':&nbsp;prop{{ '}' }}&quot;&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{ '{' }}{{ '{' }}obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}prop{{ '}' }}{{ '}' }}.read&lt;/p&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ng-template&gt;
    </div>
    <div class="p-col">
        
        <div *ngFor="let obj of valuesForObj">
            <div *ngFor="let prop of valuesForProp">   
                <ng-template [appPermissionCheck]="'default.$obj.$prop.read'" [appPermissionCheckVarDict]="{'$obj': obj, '$prop': prop}">
                    <p>You have permissions for: default.{{obj}}.{{prop}}.read</p>
                </ng-template>
            </div>
        </div>
    </div>
</div> 
<br/>
<span class="header">
    Using the jmeleon directive in star form and resolving the variables with suffix within the directive parameter itself (as array)
</span>
<br/>
<div class="p-grid">
    <div class="p-col">
        &lt;div *appPermissionCheck=&quot;'default.$obj.$prop.read'; varArr ['$obj', obj, '$prop', prop]&quot;&gt;
        &lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{obj}}.{{prop}}.read&lt;/p&gt;
    &lt;/div&gt;    
    </div>
    <div class="p-col">
        <div *ngFor="let obj of valuesForObj">
            <div *ngFor="let prop of valuesForProp">                
                <div *appPermissionCheck="'default.$obj.$prop.read'; varArr ['$obj', obj, '$prop', prop]">
                    <p>You have permissions for: default.{{obj}}.{{prop}}.read</p>
                </div> 
                <ng-template [appPermissionCheck]="'default.$obj.$prop.read'" [appPermissionCheckVarArr]="['$obj', obj, '$prop', prop]">
                    
                </ng-template>
            </div>
        </div>

    </div>
</div> 

<br/>
<span class="header">
    Using the jmeleon directive in star form and resolving the variables with suffix within the directive parameter itself (as array) with else block
</span>
<br/>
<div class="p-grid">
    <div class="p-col">
        &lt;div *appPermissionCheck=&quot;'default.$obj.$prop.read'; varArr ['$obj', obj, '$prop', prop];else failure3&quot;&gt;
                    &lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{ '{' }}{{ '{' }}obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}prop{{ '}' }}{{ '}' }}.read&lt;/p&gt;
                &lt;/div&gt; <br/>
                &lt;ng-template #failure3&gt;You have NO permissions for: default.{{ '{' }}{{ '{' }}obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}prop{{ '}' }}{{ '}' }}.read&lt;/ng-template&gt;    
    </div>
    <div class="p-col">
        <div *ngFor="let obj of valuesForObj">
            <div *ngFor="let prop of valuesForProp">                
                <div *appPermissionCheck="'default.$obj.$prop.read'; varArr ['$obj', obj, '$prop', prop];else failure3">
                    <p>You have permissions for: default.{{obj}}.{{prop}}.read</p>
                </div> 
                <ng-template #failure3>You have NO permissions for: default.{{obj}}.{{prop}}.read</ng-template> 
            </div>
        </div>

    </div>
</div> 
<span class="header">
    Using the original directive with string building
</span>
<br/>
<div class="p-grid">
    <div class="p-col">
        &lt;div *ngxPermissionsOnly=&quot;'default.' + obj + '.' + prop + '.read';else failure4&quot;&gt;
                    &lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{ '{' }}{{ '{' }}obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}prop{{ '}' }}{{ '}' }}.read&lt;/p&gt;
                &lt;/div&gt; 
                &lt;ng-template #failure4&gt;You have NO permissions for: default.{{ '{' }}{{ '{' }}obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}prop{{ '}' }}{{ '}' }}.read&lt;/ng-template&gt; 
    </div>
    <div class="p-col">
        <div *ngFor="let obj of valuesForObj">
            <div *ngFor="let prop of valuesForProp">                
                <div *ngxPermissionsOnly="'default.' + obj + '.' + prop + '.read';else failure4">
                    <p>You have permissions for: default.{{obj}}.{{prop}}.read</p>
                </div> 
                <ng-template #failure4>You have NO permissions for: default.{{obj}}.{{prop}}.read</ng-template> 
            </div>
        </div>

    </div>
</div> 

<span class="header">
    Using the original directive with string building and using the releated var-names in ngFor-loop
</span>
<br/>
<div class="p-grid">
    <div class="p-col">
        &lt;div *ngxPermissionsOnly=&quot;'default.' + $obj + '.' + $prop + '.read';else failure4&quot;&gt;
                    &lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{ '{' }}{{ '{' }}$obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}$prop{{ '}' }}{{ '}' }}.read&lt;/p&gt;
                &lt;/div&gt; 
                &lt;ng-template #failure4&gt;You have NO permissions for: default.{{ '{' }}{{ '{' }}$obj{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}$prop{{ '}' }}{{ '}' }}.read&lt;/ng-template&gt; 
    </div>
    <div class="p-col">
        <div *ngFor="let $obj of valuesForObj">
            <div *ngFor="let $prop of valuesForProp">                
                <div *ngxPermissionsOnly="'default.' + $obj + '.' + $prop + '.read';else failure4">
                    <p>You have permissions for: default.{{$obj}}.{{$prop}}.read</p>
                </div> 
                <ng-template #failure4>You have NO permissions for: default.{{$obj}}.{{$prop}}.read</ng-template> 
            </div>
        </div>

    </div>
</div> 





<span class="header">
    Using the jmeleon directive with the action permission tree object
</span>
<br/>
<div class="p-grid">
        <div class="p-col">

        &lt;div&nbsp;*appPermissionCheck=&quot;root.dto.$dtoType.$dtoField.read;&nbsp;varArr&nbsp;['$dtoType',&nbsp;type[0],&nbsp;'$dtoField',&nbsp;field];else&nbsp;failure5&quot;&gt;<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;You&nbsp;have&nbsp;permissions&nbsp;for:&nbsp;default.{{ '{' }}{{ '{' }}{{ '{' }}{{ '{' }}type[0]{{ '}' }}{{ '}' }}{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}{{ '{' }}{{ '{' }}field{{ '}' }}{{ '}' }}{{ '}' }}{{ '}' }}.read&lt;/p&gt;<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ng-template&nbsp;#failure5&gt;You&nbsp;have&nbsp;NO&nbsp;permissions&nbsp;for: dto.{{ '{' }}{{ '{' }}{{ '{' }}{{ '{' }}type[0]{{ '}' }}{{ '}' }}{{ '}' }}{{ '}' }}.{{ '{' }}{{ '{' }}{{ '{' }}{{ '{' }}field{{ '}' }}{{ '}' }}{{ '}' }}{{ '}' }}.read&nbsp;({{ '{' }}{{ '{' }}{{ '{' }}{{ '{' }}root.dto.$dtoType.$dtoField.read{{ '}' }}{{ '}' }}{{ '}' }}{{ '}' }}&lt;/ng-template&gt;&nbsp;&nbsp;<br/>

        </div>
        <div class="p-col">
            <div *ngFor="let type of valuesForDtoType">
                <div *ngFor="let field of type[1]">                
                                  
                     <div *appPermissionCheck="root.dto.$dtoType.$dtoField.read; varArr ['$dtoType', type[0], '$dtoField', field];else failure5">
    <!--                     <p>You have permissions for: default.{{type[0]}}.{{field}}.read</p> -->
                        You have permissions for: default.{{type[0]}}.{{field}}.read
                    </div> 
                    <ng-template #failure5>You have NO permissions for: dto.{{type[0]}}.{{field}}.read ({{root.dto.$dtoType.$dtoField.read}}</ng-template>  
                   
                    
                </div>
            </div>
        </div>
    </div> 

<!-- <div *appPermissionCheck="root.dto.$dtoType.$dtoField.read; varArr ['$dtoType', 'User', '$dtoField', 'firstName'];else failure5">
    <p>You have permissions for: default.{{type[0]}}.{{field}}.read</p>
</div>  -->


<span class="header">
    Template for directive unit tests
</span>
<br/>

<div class="p-grid">
    <div class="p-col"></div>
    <div class="p-col">
        <ng-template [appPermissionCheck]="actionPath" [appPermissionCheckVarArr]="vars" [appPermissionCheckElse]="failureA" >
            <div>yes</div>
        </ng-template>
        <ng-template #failureA><div>No</div></ng-template>
    </div>
</div> 

<ng-template [ngxPermissionsOnly]="'root.layer1.layer2.read'" [ngxPermissionsOnlyElse]="failure">
    <div>yes</div>
</ng-template>
<ng-template #failure><div>No</div></ng-template>

<div class="p-grid">
    <div class="p-col"></div>
    <div class="p-col"></div>
</div> 
